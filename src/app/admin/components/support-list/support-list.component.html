<div class="container mt-5">
  <h4 class="font-weight-normal"><i class="fa fa-pencil-square-o"></i>Danh sách các yêu cầu trợ giúp</h4>
  <hr>
  <select
    id="selectReasonId"
    class="float-right mb-3"
    (change)="getSupports()"
  >
    <option value="">Tất cả</option>
    <option
      *ngFor="let reason of reasons"
      [value]="reason.id"
    >
      {{reason.name}}
    </option>
  </select>

  <div class="table-responsive text-nowrap mt-5">
    <table class="table table-striped table-hover">
      <caption hidden>Support list</caption>
      <thead>
      <tr>
        <th>Email</th>
        <th>Họ tên</th>
        <th>SĐT</th>
        <th>Lý do</th>
        <th>Ngày gửi</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let support of supports">
          <td>
            <label>{{ support.email }}</label>
          </td>
          <td>
            <label>{{ support.name }}</label>
          </td>
          <td>
            <label>{{ support.phoneNumber }}</label>
          </td>
          <td>
            <label>{{ support.reason.name }}</label>
          </td>
          <td>
            <label>{{ support.createdAt | date: "dd/MM/yyyy" }}</label>
          </td>
          <td>
            <label><button class="btn btn-link" (click)="openModal(readSupportDetail, support)">Xem</button> </label>
          </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal -->
<ng-template let-modal #readSupportDetail>
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalLongTitle">Nội dung trợ giúp</h5>
    <button type="button" class="close" (click)="modal.dismiss()">
      <span>&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-4">Email:</div>
      <div class="col-8">{{support.email}}</div>
    </div>
    <div class="row">
      <div class="col-4">Họ tên:</div>
      <div class="col-8">{{support.name}}</div>
    </div>
    <div class="row">
      <div class="col-4">Số điện thoại:</div>
      <div class="col-8">{{support.phoneNumber}}</div>
    </div>
    <div class="row">
      <div class="col-4">Lý do:</div>
      <div class="col-8">{{support.reason.name}}</div>
    </div>
    <div class="row">
      <div class="col-4">Ngày gửi:</div>
      <div class="col-8">{{support.createdAt | date: "dd/MM/yyyy"}}</div>
    </div>
    <div class="row">
      <div class="col-4">Nội dung:</div>
      <div class="col-8">{{support.content}}</div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light" (click)="modal.dismiss()">
      Đóng
    </button>
  </div>
</ng-template>

<nav class="d-flex justify-content-center">
  <ul class="pagination">
    <li class="page-item" [ngClass]="{disabled: first}">
      <a class="page-link" href="" (click)="setPage(0, $event)">
        <em class="fa fa-angle-double-left"></em>
      </a>
    </li>
    <li class="page-item" [ngClass]="{disabled: first}">
      <a class="page-link" href="" (click)="setPage(page - 1, $event)">
        <em class="fa fa-angle-left"></em>
      </a>
    </li>
    <li
      class="page-item"
      *ngFor="let p of pages; let i = index"
      [ngClass]="{ active: page === i }"
    >
      <a class="page-link" href="" (click)="setPage(i, $event)">{{ i + 1 }}</a>
    </li>
    <li class="page-item" [ngClass]="{disabled: last}">
      <a class="page-link" href="" (click)="setPage(page + 1, $event)">
        <em class="fa fa-angle-right"></em>
      </a>
    </li>
    <li class="page-item" [ngClass]="{disabled: last}">
      <a class="page-link" href="" (click)="setPage(pages.length - 1, $event)">
        <em class="fa fa-angle-double-right"></em>
      </a>
    </li>
  </ul>
</nav>

